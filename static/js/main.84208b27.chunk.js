(this["webpackJsonprestaurant-review-site"]=this["webpackJsonprestaurant-review-site"]||[]).push([[0],{22:function(e,t,n){e.exports=n(35)},30:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(8),o=n.n(i),c=n(9),l=n(21),u=(n(30),n(12)),s=n(11),f=n(7),d=n(3),m=n(18),g=n(6),p=n(14),w=n(4),v=Object(g.a)((function(){return n.e(6).then(n.bind(null,38))})),b=Object(g.a)((function(){return n.e(9).then(n.bind(null,39))})),h=Object(g.a)((function(){return n.e(5).then(n.bind(null,43))})),x=Object(g.a)((function(){return n.e(3).then(n.bind(null,44))})),y=Object(g.a)((function(){return n.e(4).then(n.bind(null,40))})),E=Object(g.a)((function(){return n.e(7).then(n.bind(null,41))})),O=Object(g.a)((function(){return n.e(8).then(n.bind(null,42))}));window.places={},window.markers={};var j=function(){var e=Object(m.b)({googleMapsApiKey:"AIzaSyD5_tW7XIWdolzRoZE0f6OUF7P9zP5Aav8",libraries:["places"]}).isLoaded,t=r.a.useState(""),n=Object(d.a)(t,2),a=n[0],i=n[1],o=r.a.useState({lat:0,lng:0}),c=Object(d.a)(o,2),l=c[0],g=c[1],j=r.a.useState(null),N=Object(d.a)(j,2),k=N[0],S=N[1],C=r.a.useState({}),_=Object(d.a)(C,2),A=_[0],z=_[1],P=r.a.useState(null),D=Object(d.a)(P,2),F=D[0],L=D[1],W=r.a.useState(null),I=Object(d.a)(W,2),R=I[0],U=I[1],T=r.a.useState(null),M=Object(d.a)(T,2),K=M[0],q=M[1],B=r.a.useState(0),J=Object(d.a)(B,2),H=J[0],X=J[1],Y=r.a.useState(5),Z=Object(d.a)(Y,2),$=Z[0],G=Z[1],Q=r.a.useState(!1),V=Object(d.a)(Q,2),ee=V[0],te=V[1],ne=r.a.useState(!1),ae=Object(d.a)(ne,2),re=ae[0],ie=ae[1],oe=r.a.useState({lat:0,lng:0}),ce=Object(d.a)(oe,2),le=ce[0],ue=ce[1],se=!!F,fe=r.a.useCallback((function(){return Object(w.g)(K,F)}),[K,F]),de=r.a.useMemo((function(){return Object(w.h)(Object(w.e)(A,a,H,$))}),[A,a,H,$]);r.a.useEffect((function(){Object(w.c)().then((function(e){return S(e)})).catch(w.j)}),[]),r.a.useEffect((function(){R&&k&&(new window.google.maps.Marker({map:R,position:k,icon:{url:"images/marker.png",scaledSize:{width:32,height:48},labelOrigin:{x:16,y:18}},label:"\ud83d\ude0a"}),g(k))}),[R,k]),r.a.useEffect((function(){R&&R.setCenter(l)}),[R,l]),r.a.useEffect((function(){K&&Object(w.f)(K,l).then((function(e){return z(e)})).catch(w.j)}),[K,l]),r.a.useEffect((function(){F&&(Object.prototype.hasOwnProperty.call(A,F)||L(null))}),[A,F]),r.a.useEffect((function(){if(R){Object(w.a)();var e=Object.values(de).reduce((function(e,t){var n=t.location,a=t.id,r=t.rating,i=new window.google.maps.Marker({map:R,position:n,icon:{url:"images/marker.png",scaledSize:{width:32,height:48},labelOrigin:{x:16,y:18}},label:{fontFamily:'"Montserrat", sans-serif',fontWeight:"600",fontSize:"12px",color:"#fff",text:r>0?r.toFixed(1):"N"}});return i.addListener("click",(function(){return L(a)})),e[a]=i,e}),{});window.markers=e}}),[R,de]);var me=r.a.useCallback((function(e){e.preventDefault();var t=e.target.nextSibling,n=e.target.previousSibling;switch(e.key){case"ArrowUp":case"ArrowLeft":n&&n.focus();break;case"ArrowDown":case"ArrowRight":t&&t.focus()}}),[]);return console.log(k,l),r.a.createElement("div",{className:"absolute inset-0"},r.a.createElement("div",{className:"flex relative w-full h-full overflow-hidden"},r.a.createElement("div",{className:"flex-initial relative w-full max-w-xl h-full shadow-xl z-50"},r.a.createElement("div",{className:"flex flex-col w-full h-full"},r.a.createElement("header",{className:"flex-none"},r.a.createElement("nav",{className:"flex py-4 border-b"},r.a.createElement("div",{className:"w-full px-6"},r.a.createElement("div",{className:"flex items-center h-12 shadow-md rounded"},r.a.createElement("label",{className:"w-full",htmlFor:"query"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"flex flex-initial w-10 h-10 items-center justify-center cursor-pointer",role:"button",tabIndex:"0"},r.a.createElement(p.a,{className:"text-gray-900",icon:"search"})),r.a.createElement("input",{id:"query",className:"flex-auto h-10 font-bold text-gray-900 placeholder-gray-600 rounded",name:"query",value:a,placeholder:"Search a Restaurant",onChange:function(e){return i(e.target.value)}}),a.length>0&&r.a.createElement("div",{className:"flex flex-initial w-10 h-10 items-center justify-center cursor-pointer",tabIndex:"0",role:"button",onKeyDown:function(e){" "!==e.key&&"Enter"!==e.key&&"Spacebar"!==e.key||(e.preventDefault(),i(""))},onClick:function(){return i("")}},r.a.createElement(p.a,{className:"text-gray-900",icon:"times"}))))),r.a.createElement("div",{className:"flex mt-3"},r.a.createElement("div",{className:"flex-1"},r.a.createElement("select",{className:"w-full h-12 px-4 font-bold text-gray-900 bg-gray-200 shadow-inner appearance-none rounded",value:H,onChange:function(e){return X(+e.target.value)}},r.a.createElement("option",{key:"min-rating-option-0",value:"0"},"New"),Object(w.k)(1,5).map((function(e){return r.a.createElement("option",{key:"min-rating-option-".concat(e),value:e},e," (Star",e>1?"s":"",")")})))),r.a.createElement("div",{className:"flex items-center justify-center w-12"},r.a.createElement("span",{className:"font-bold"},"\u2bc8")),r.a.createElement("div",{className:"flex-1"},r.a.createElement("select",{className:"w-full h-12 px-4 font-bold text-gray-900 bg-gray-200 shadow-inner appearance-none rounded",value:$,onChange:function(e){return G(+e.target.value)}},Object(w.k)(H+1,6).map((function(e){return r.a.createElement("option",{key:"max-rating-option-".concat(e),value:e},e," (Star",e>1?"s":"",")")})))))))),r.a.createElement("div",{className:"flex-1 relative max-h-full"},r.a.createElement("div",{className:"absolute inset-0"},r.a.createElement("div",{className:"relative w-full h-full max-h-full overflow-x-hidden overflow-y-scroll"},r.a.createElement("main",{className:"p-6",onKeyDown:function(e){e.persist(),me(e)}},de.length>0?r.a.createElement(r.a.Fragment,null,de.map((function(e){return r.a.createElement(h,{key:e.id,id:e.id,name:e.name,cover:e.cover,types:e.types,rating:e.rating,ratings:e.ratings,handleClick:function(t){t.preventDefault(),L(e.id)}})}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex items-center justify-center mb-6"},r.a.createElement(p.a,{className:"text-purple-400",icon:"sad-tear",size:"5x"})),r.a.createElement("div",{className:"text-2xl font-bold text-gray-900 text-center"},"No Results!"),r.a.createElement("div",{className:"text-gray-700 text-center"},"Sorry there are no results for this search. Please try again.")))))))),se&&r.a.createElement(b,{query:fe},(function(e){var t=e.loading,n=e.error,a=e.data,i=e.refetch;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement("div",{className:"absolute left-xl w-full max-w-lg h-screen bg-white z-10"},r.a.createElement(v,{key:F},r.a.createElement(y,null))):r.a.createElement(r.a.Fragment,null,n.length>0?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{role:"dialog",tabIndex:"0",className:"absolute left-xl w-full max-w-lg h-screen bg-white z-10"},r.a.createElement(v,{key:F},r.a.createElement(x,{place:a,handleClose:function(e){e.preventDefault(),L(null)},handleClickAddReview:function(){return te(!0)}}))),ee&&r.a.createElement("div",{className:"absolute left-xl w-full max-w-lg h-screen z-20"},r.a.createElement("div",{className:"absolute inset-0 bg-black opacity-50 -z-1"}),r.a.createElement("div",{className:"p-6"},r.a.createElement(O,{handleSubmit:function(e,t){e.preventDefault(),function(e,t){var n=[e].concat(Object(u.a)(t.reviews)),a=t.rating?(t.ratings*t.rating+e.rating)/(t.ratings+1):e.rating,r=t.ratings+1;window.places[t.id]=Object(f.a)(Object(f.a)({},t),{},{rating:a,ratings:r,reviews:n}),window.markers[t.id].setLabel(a.toString()),z((function(e){return Object(f.a)(Object(f.a)({},e),{},Object(s.a)({},t.id,window.places[t.id]))})),te(!1)}(t,a),i()},handleCancel:function(e){e.preventDefault(),te(!1)}}))))))})),re&&r.a.createElement("div",{className:"absolute left-xl w-full max-w-lg h-screen z-20"},r.a.createElement("div",{className:"absolute inset-0 bg-black opacity-50 -z-1"}),r.a.createElement("div",{className:"p-6"},r.a.createElement(E,{handleSubmit:function(e,t){var n;e.preventDefault(),n=t,window.places[n.id]=n,z((function(e){return Object(f.a)(Object(f.a)({},e),{},Object(s.a)({},n.id,window.places[n.id]))})),ie(!1)},handleCancel:function(){return ie(!1)},location:le}))),r.a.createElement("div",{className:"flex flex-auto relative"},e?r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{mapContainerStyle:{width:"100%"},center:k,zoom:16,onLoad:function(e){U(e),q(new window.google.maps.places.PlacesService(e))},onClick:function(e){ue(e.latLng.toJSON()),ie(!0)},onBoundsChanged:Object(w.b)((function(){g(R.getCenter())}))},r.a.createElement(r.a.Fragment,null))):r.a.createElement(r.a.Fragment,null,"Loading..."))))},N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.b.add(l.a),o.a.render(r.a.createElement(j,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");N?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):k(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):k(t,e)}))}}()},4:function(e,t,n){"use strict";n.d(t,"k",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return f})),n.d(t,"e",(function(){return w})),n.d(t,"h",(function(){return v})),n.d(t,"j",(function(){return b})),n.d(t,"i",(function(){return h})),n.d(t,"l",(function(){return x})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return E}));var a=n(12),r=n(5),i=n.n(r),o=n(13),c=function(e,t){return Array.from({length:Number.parseInt(t,10)-Number.parseInt(e)},(function(t,n){return n+Number.parseInt(e)}))},l=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:2,e.abrupt("return",new Promise((function(e,a){var r=(t.size/1e6).toFixed(3);if(r<n){var i=new FileReader;i.onload=function(){return e(i.result)},i.onerror=function(){return a()},i.onabort=function(){return a()},i.readAsDataURL(t)}else window.alert("Your file has ".concat(r,"mb. The max is ").concat(n,"mb. Please try again with another file.")),a()})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){"geolocation"in window.navigator?window.navigator.geolocation.getCurrentPosition((function(t){var n=t.coords,a=n.latitude,r=n.longitude;e({lat:a,lng:r})}),(function(){return t()}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}):t()})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){t.nearbySearch({location:n,radius:500,type:["restaurant"]},(function(t,n){switch(n){case window.google.maps.places.PlacesServiceStatus.OK:e(m(t));break;default:e({})}}),(function(){return a()}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){Object.prototype.hasOwnProperty.call(window.places,n)?e(window.places[n]):t.getDetails({placeId:n,fields:["place_id","name","type","reviews","user_ratings_total","formatted_address","photos","international_phone_number","url","rating","geometry","vicinity","website"]},(function(t,r){r===window.google.maps.places.PlacesServiceStatus.OK?(window.places[n]=d(t),e(window.places[n])):a()}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(e){var t=e.place_id,n=void 0===t?"":t,a=e.name,r=void 0===a?"":a,i=e.photos,o=void 0===i?[{getUrl:function(){return null}}]:i,c=e.types,l=void 0===c?[]:c,u=e.rating,s=void 0===u?0:u,f=e.user_ratings_total,d=void 0===f?0:f,m=e.geometry.location,w=e.international_phone_number,v=void 0===w?"":w,b=e.opening_hours,h=(b=void 0===b?{}:b).isOpen,x=void 0===h?function(){return!0}:h,y=e.website,E=void 0===y?"":y,O=e.vicinity,j=void 0===O?"":O,N=e.formatted_address,k=void 0===N?"":N,S=e.reviews,C=void 0===S?[]:S,_=e.url,A=void 0===_?"":_;return{id:n,cover:o[0].getUrl({maxWidth:570,maxHeight:260}),types:l.slice(-8).map((function(e){return e.replace(/_/g," ")})),phoneNumber:v,gmap:A,address:k||j,ratings:d,reviews:p(g(C)),rating:s,isOpen:x,website:E,name:r,location:m}},m=function(e){return e.reduce((function(e,t){return e[t.place_id]=d(t),e}),{})},g=function(e){return e.map((function(e){return function(e){var t=e.profile_photo_url,n=e.author_name,a=e.text,r=e.time;return{date:new Date(1e3*r),avatar:t,author:n,comment:a}}(e)}))},p=function(e){return Object(a.a)(e).sort((function(e,t){return t.date.getTime()-e.date.getTime()}))},w=function(e,t,n,a){return Object.values(e).filter((function(e){var r=e.name,i=e.rating;return r.toLowerCase().includes(t.toLowerCase())&&i>=n&&i<=a}))},v=function(e){return Object(a.a)(e).sort((function(e,t){return t.rating-e.rating}))},b=function(){},h=function(e){return e?window.encodeURIComponent(e):""},x=function(){return((new Date).getTime()*Math.random()).toString(32).replace(".","")},y=function(){return Object.values(window.markers).forEach((function(e){return e.setMap(null)}))},E=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:150,a=function(){for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];window.clearTimeout(t),t=window.setTimeout((function(){return e.apply(void 0,r)}),n)};return a}}},[[22,1,2]]]);
//# sourceMappingURL=main.84208b27.chunk.js.map